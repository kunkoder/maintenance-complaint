<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title th:text="${title} ? ${title} + ' - Maintenance' : 'Maintenance'"></title>
	<meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
	<link rel="icon" href="/assets/img/icon.ico" type="image/x-icon" />

	<!-- Fonts and icons -->
	<script src="/assets/js/plugin/webfont/webfont.min.js"></script>
	<script src="/assets/js/core/jquery.3.2.1.min.js"></script>
	<script th:inline="javascript">
		WebFont.load({
			google: { "families": ["Lato:300,400,700,900"] },
			custom: {
				"families": ["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "simple-line-icons"],
				urls: ['/assets/css/fonts.min.css']
			},
			active: function () {
				sessionStorage.fonts = true;
			}
		});
	</script>

	<!-- CSS Files -->
	<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="/assets/css/atlantis.min.css">

	<!-- Custom Styles -->
	<th:block layout:fragment="styles"></th:block>
</head>

<body>
	<div class="wrapper">
		<div class="main-header">
			<!-- Logo Header -->
			<div class="logo-header" data-background-color="blue">

				<a href="index.html" class="logo">
					<img src="assets/img/logo.svg" alt="navbar brand" class="navbar-brand">
				</a>
				<button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse"
					data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon">
						<i class="icon-menu"></i>
					</span>
				</button>
				<button class="topbar-toggler more"><i class="icon-options-vertical"></i></button>
				<div class="nav-toggle">
					<button class="btn btn-toggle toggle-sidebar">
						<i class="icon-menu"></i>
					</button>
				</div>
			</div>
			<!-- End Logo Header -->

			<!-- Navbar Header -->
			<nav class="navbar navbar-header navbar-expand-lg" data-background-color="blue">

				<div class="container-fluid">
					<ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
					</ul>
				</div>
			</nav>
			<!-- End Navbar -->
		</div>

		<!-- Sidebar -->
		<div class="sidebar sidebar-style-2">
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
				<div class="sidebar-content">
					<div class="user">
						<div class="avatar-sm float-left mr-2">
							<img src="/assets/img/profile.jpg" alt="..." class="avatar-img rounded-circle">
						</div>
						<div class="info">
							<a data-toggle="collapse" href="#collapseExample" aria-expanded="true">
								<span>
									Hizrian
									<span class="user-level">Administrator</span>
									<span class="caret"></span>
								</span>
							</a>
							<div class="clearfix"></div>

							<div class="collapse in" id="collapseExample">
								<ul class="nav">
									<li>
										<a href="#profile">
											<span class="link-collapse">My Profile</span>
										</a>
									</li>
									<li>
										<a href="#edit">
											<span class="link-collapse">Logout</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<ul class="nav nav-primary">
						<li class="nav-item" th:classappend="${title == 'Overview'} ? 'active' : ''">
							<a th:href="@{/}">
								<i class="fas fa-home"></i>
								<p>Dashboard</p>
							</a>
						</li>
						<li class="nav-section">
							<span class="sidebar-mini-icon">
								<i class="fa fa-ellipsis-h"></i>
							</span>
							<h4 class="text-section">Menu</h4>
						</li>
						<li class="nav-item" th:classappend="${title == 'User Management'} ? 'active' : ''">
							<a th:href="@{/users}">
								<i class="fas fa-users"></i>
								<p>User Management</p>
							</a>
						</li>
						<li class="nav-item" th:classappend="${title == 'Complaint List'} ? 'active' : ''">
							<a th:href="@{/complaints}">
								<i class="fas fa-list-ul"></i>
								<p>Complaint List</p>
							</a>
						</li>
						<li class="nav-item" th:classappend="${title == 'Daily Inspection'} ? 'active' : ''">
							<a th:href="@{/inspections}">
								<i class="far fa-calendar-check"></i>
								<p>Daily Inspection</p>
							</a>
						</li>
						<li class="nav-item" th:classappend="${title == 'Area List'} ? 'active' : ''">
							<a th:href="@{/areas}">
								<i class="fas fa-industry"></i>
								<p>Area List</p>
							</a>
						</li>
						<li class="nav-item" th:classappend="${title == 'Equipment List'} ? 'active' : ''">
							<a th:href="@{/equipments}">
								<i class="fas fa-bezier-curve"></i>
								<p>Equipment List</p>
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- End Sidebar -->

		<!-- Main Panel -->
		<div class="main-panel">
			<div class="content" layout:fragment="content">
				<!-- Page-specific content goes here -->
			</div>
		</div>
	</div>

	<!--   Core JS Files   -->
	<script src="assets/js/core/jquery.3.2.1.min.js"></script>
	<script src="assets/js/core/popper.min.js"></script>
	<script src="assets/js/core/bootstrap.min.js"></script>

	<!-- jQuery UI -->
	<script src="assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script src="assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>

	<!-- Chart JS -->
	<script src="assets/js/plugin/chart.js/chart.min.js"></script>

	<!-- jQuery Sparkline -->
	<script src="assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

	<!-- Chart Circle -->
	<script src="assets/js/plugin/chart-circle/circles.min.js"></script>

	<!-- Datatables -->
	<script src="assets/js/plugin/datatables/datatables.min.js"></script>

	<!-- Bootstrap Notify -->
	<script src="assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

	<!-- jQuery Vector Maps -->
	<script src="assets/js/plugin/jqvmap/jquery.vmap.min.js"></script>
	<script src="assets/js/plugin/jqvmap/maps/jquery.vmap.world.js"></script>

	<!-- Atlantis JS -->
	<script src="assets/js/atlantis.min.js"></script>

	<!-- Atlantis DEMO methods, don't include it in your project! -->
	<!-- <script src="assets/js/demo.js"></script> -->
	<script>
		Circles.create({
			id: 'circles-1',
			radius: 60,
			value: 100,
			maxValue: 100,
			width: 9,
			text: 555,
			colors: ['#f1f1f1', '#FF9E27'],
			duration: 400,
			wrpClass: 'circles-wrp',
			textClass: 'circles-text',
			styleWrapper: true,
			styleText: true
		})

		Circles.create({
			id: 'circles-2',
			radius: 60,
			value: 100,
			maxValue: 100,
			width: 9,
			text: 888,
			colors: ['#f1f1f1', '#2BB930'],
			duration: 400,
			wrpClass: 'circles-wrp',
			textClass: 'circles-text',
			styleWrapper: true,
			styleText: true
		})

		Circles.create({
			id: 'circles-3',
			radius: 60,
			value: 100,
			maxValue: 100,
			width: 9,
			text: 222,
			colors: ['#f1f1f1', '#F25961'],
			duration: 400,
			wrpClass: 'circles-wrp',
			textClass: 'circles-text',
			styleWrapper: true,
			styleText: true
		})

		Circles.create({
			id: 'circles-4',
			radius: 60,
			value: 100,
			maxValue: 100,
			width: 9,
			text: 333,
			colors: ['#f1f1f1', '#FF9E27'],
			duration: 400,
			wrpClass: 'circles-wrp',
			textClass: 'circles-text',
			styleWrapper: true,
			styleText: true
		})

		var totalIncomeChart = document.getElementById('totalIncomeChart').getContext('2d');

		var mytotalIncomeChart = new Chart(totalIncomeChart, {
			type: 'bar',
			data: {
				labels: ["S", "M", "T", "W", "T", "F", "S"],
				datasets: [{
					label: "Total Income",
					backgroundColor: '#ff9e27',
					borderColor: 'rgb(23, 125, 255)',
					data: [6, 4, 9, 5, 4, 6, 4, 3, 8, 10],
				}],
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: {
					display: false,
				},
				scales: {
					yAxes: [{
						ticks: {
							display: false //this will remove only the label
						},
						gridLines: {
							drawBorder: false,
							display: false
						}
					}],
					xAxes: [{
						gridLines: {
							drawBorder: false,
							display: false
						}
					}]
				},
			}
		});

		var ctx = document.getElementById('statisticsChart').getContext('2d');

		var statisticsChart = new Chart(ctx, {
			type: 'line',
			data: {
				labels: ["AQPCK-1001", "AQPCK-1002", "AQPCK-1003", "AQPCK-1005", "AQPCK-1006", "AQPCK-1007", "AQPCK-1008", "AQPCK-1009/1"],
				datasets: [
					{
						label: "Closed",
						borderColor: '#2bb930',
						pointBackgroundColor: 'rgba(43, 185, 48, 0.6)',   // #2bb930 → rgba
						pointRadius: 0,
						backgroundColor: 'rgba(43, 185, 48, 0.4)',         // #2bb930 → rgba
						legendColor: '#2bb930',
						fill: true,
						borderWidth: 2,
						data: [154, 184, 175, 203, 210, 231, 240, 278, 252, 312, 320, 374]
					},
					{
						label: "Open",
						borderColor: '#177dff',
						pointBackgroundColor: 'rgba(23, 125, 255, 0.6)',  // #177dff → rgba
						pointRadius: 0,
						backgroundColor: 'rgba(23, 125, 255, 0.4)',        // #177dff → rgba
						legendColor: '#177dff',
						fill: true,
						borderWidth: 2,
						data: [256, 230, 245, 287, 240, 250, 230, 295, 331, 431, 456, 521]
					},
					{
						label: "In Progress",
						borderColor: '#fdaf4b',
						pointBackgroundColor: 'rgba(253, 175, 75, 0.6)', // #fdaf4b → rgba
						pointRadius: 0,
						backgroundColor: 'rgba(253, 175, 75, 0.4)',       // #fdaf4b → rgba
						legendColor: '#fdaf4b',
						fill: true,
						borderWidth: 2,
						data: [542, 480, 430, 550, 530, 453, 380, 434, 568, 610, 700, 900]
					},
					{
						label: "Pending",
						borderColor: '#f3545d',
						pointBackgroundColor: 'rgba(243, 84, 93, 0.6)',  // #f3545d → rgba
						pointRadius: 0,
						backgroundColor: 'rgba(243, 84, 93, 0.4)',        // #f3545d → rgba
						legendColor: '#f3545d',
						fill: true,
						borderWidth: 2,
						data: [1200, 1300, 1250, 1400, 1350, 1450, 1500, 1600, 1700, 1800, 1900, 2000]
					}
				]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: {
					display: false // We'll use custom HTML legend later
				},
				tooltips: {
					mode: 'index',
					intersect: false,
					backgroundColor: 'rgba(0,0,0,0.8)',
					titleColor: '#fff',
					bodyColor: '#fff',
					xPadding: 12,
					yPadding: 12,
					caretSize: 8,
					cornerRadius: 6,
					borderColor: '#333',
					callbacks: {
						title: function (tooltipItems, data) {
							const months = ["Tab Welding Machine", "Plate Surface Grinding Machine", "Plate Automatic UT Inspection Machine", "Plate Edge Milling Machine", "Plate Edge Crimping Machine", "Press Bending Machine",
								"Tack Welding", "Internal Welding Machine Line - 1"];
							return months[tooltipItems[0].index];
						},

						label: function (tooltipItem, data) {
							const dataset = data.datasets[tooltipItem.datasetIndex];
							const value = dataset.data[tooltipItem.index]; // Correct way
							const label = dataset.label || '';
							const formattedValue = value.toLocaleString(); // e.g., 1,234

							const icons = { 'Subscribers': '👤', 'New Visitors': '🌐', 'Active Users': '🟢' };
							const icon = icons[label] || '🔹';

							return `${icon} ${label}: ${formattedValue}`;
						}
					}
				},
				layout: {
					padding: { left: 5, right: 5, top: 15, bottom: 15 }
				},
				scales: {
					yAxes: [{
						ticks: {
							fontStyle: "500",
							beginAtZero: false,
							maxTicksLimit: 5,
							padding: 10,
							// Format Y-axis labels (e.g., 500 → 0.5k)
							callback: function (value) {
								if (value >= 1000) {
									return (value / 1000).toFixed(1) + 'k';
								}
								return value.toLocaleString();
							}
						},
						gridLines: {
							drawTicks: false,
							display: false
						}
					}],
					xAxes: [{
						gridLines: {
							zeroLineColor: "transparent"
						},
						ticks: {
							padding: 10,
							fontStyle: "500"
						}
					}]
				},
				legendCallback: function (chart) {
					var text = [];
					text.push('<ul class="' + chart.id + '-legend html-legend">');
					for (var i = 0; i < chart.data.datasets.length; i++) {
						text.push('<li><span style="background-color:' + chart.data.datasets[i].legendColor + '"></span>');
						if (chart.data.datasets[i].label) {
							text.push(chart.data.datasets[i].label);
						}
						text.push('</li>');
					}
					text.push('</ul>');
					return text.join('');
				}
			}
		});

		var myLegendContainer = document.getElementById("myChartLegend");

		// generate HTML legend
		myLegendContainer.innerHTML = statisticsChart.generateLegend();

		// bind onClick event to all LI-tags of the legend
		var legendItems = myLegendContainer.getElementsByTagName('li');
		for (var i = 0; i < legendItems.length; i += 1) {
			legendItems[i].addEventListener("click", legendClickCallback, false);
		}
	</script>

	<!-- Page-specific scripts -->
	<th:block layout:fragment="scripts"></th:block>

</body>

</html>